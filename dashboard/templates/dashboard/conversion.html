{% extends 'dashboard/base.html' %} 
{% load static %}
{% load crispy_forms_tags %}

{% block content %}
<div class="container mt-5">

  <div class="card shadow p-4 mb-4" style="border-radius: 1rem;">
    <h3 class="mb-3 text-center">Conversion Tool</h3>

    <form method="POST">
      {% csrf_token %}
      {{ form|crispy }}

      <button type="submit" name="action" value="select" class="btn btn-primary w-100">Select</button>

      {% if input %}
        <hr>

        <div class="card shadow p-3 mb-3" style="border-radius: 1rem;">
          <div class="row g-3">

            {# --- Currency Conversion --- #}
            {% if form.data.measurement == 'currency' %}
              <div class="col-md-4">
                {{ m_form.amount|as_crispy_field }}
              </div>
              <div class="col-md-4">
                {{ m_form.from_currency|as_crispy_field }}
              </div>
              <div class="col-md-4">
                {{ m_form.to_currency|as_crispy_field }}
              </div>

            {# --- Length / Mass / Volume Conversions --- #}
            {% else %}
              <div class="col-md-4">
                {{ m_form.input|as_crispy_field }}
              </div>
              <div class="col-md-4">
                {{ m_form.measure1|as_crispy_field }}
              </div>
              <div class="col-md-4">
                {{ m_form.measure2|as_crispy_field }}
              </div>
            {% endif %}

          </div>
        </div>

        {% if answer %}
          <div class="card shadow p-3 mb-3" style="border-radius: 1rem;">
            <h4 class="text-center result-value">Result: {{ answer }}</h4>
          </div>
        {% endif %}

        {% if converted_amount %}
          <div class="card shadow p-3 mb-3" style="border-radius: 1rem;">
            <h4 class="text-center result-value">Result: {{ converted_amount }}</h4>
          </div>
        {% endif %}

        <button type="submit" name="action" value="convert" class="btn btn-primary w-100">Convert</button>
      {% endif %}
    </form>
  </div>
</div>

<style>
label[for="id_input"] { display: none !important; }

.result-value {
  color: #0d6efd;
  font-weight: 600;
  font-size: 1.25rem;
}
</style>

{% endblock content %}
