{% extends 'dashboard/base.html' %}
{% load static %}
{% block content %}
<section class="dashboard">
  <h1 class="dashboard-title">Available Assignments</h1>
  <p class="dashboard-subtitle">Click an assignment to view details and submit</p>

  <div class="dashboard-grid">
    {% for assignment in assignments %}
    <a href="{% url 'assignment_detail' assignment.id %}" class="dashboard-card">
      <img src="{{ assignment.image_url }}" 
        alt="{{ assignment.course_code }}"
        class="img-fluid mb-2" style="height: 150px; object-fit: cover;">
      <h5>{{ assignment.title }}</h5>
      <p class="text-muted mb-1">{{ assignment.course_code }}</p>
      <p class="mb-1"><small>Posted by: {{ assignment.lecturer.get_full_name|default:assignment.lecturer.username }}</small></p>
      <p class="mb-0 {% if assignment.due_date and assignment.due_date < now %}text-danger{% endif %}">
        Due: {{ assignment.due_date|date:"M d, Y H:i" | default:"No date set" }}
      </p>
    </a>
    {% empty %}
    <p>No assignments available.</p>
    {% endfor %}
  </div>
</section>
{% endblock %}